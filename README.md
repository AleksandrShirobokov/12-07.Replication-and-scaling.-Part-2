# «Репликация и масштабирование. Часть 2»
# Александр Широбоков
## Задание 1
### Опишите основные преимущества использования масштабирования методами:

**Активный master-сервер и пассивный репликационный slave-сервер:**

*Основные преимущества использования активного master-сервера и пассивного репликационного slave-сервера для масштабирования включают:*

 - Высокая доступность: При использовании данной конфигурации, если активный master-сервер выходит из строя или недоступен, пассивный slave-сервер может взять на себя его функции, обеспечивая непрерывность работы системы. Это позволяет предотвратить простои и минимизировать потери данных.

 - Распределение нагрузки на чтение: Активный master-сервер отвечает за запись данных, в то время как пассивный slave-сервер может использоваться для распределения нагрузки на чтение. Это позволяет улучшить производительность системы, поскольку slave-серверы могут обслуживать запросы на чтение параллельно.

 - Резервное копирование и восстановление: Пассивный slave-сервер может использоваться для создания резервных копий данных с активного master-сервера. В случае сбоя или потери данных на master-сервере, репликация данных на slave-сервере позволяет восстановить систему с минимальными потерями.

 - Легкость масштабирования: При использовании этой конфигурации, добавление дополнительных slave-серверов для увеличения пропускной способности и масштабируемости системы относительно просто. Новые slave-серверы могут быть добавлены для обработки дополнительной нагрузки на чтение без прерывания работы системы.

**Master-сервер и несколько slave-серверов:**

*Преимущества использования master-сервера и нескольких slave-серверов для масштабирования включают:*

 - Высокая пропускная способность: Распределение нагрузки между несколькими slave-серверами позволяет обрабатывать больший объем запросов и увеличивает пропускную способность системы. Запросы могут быть распределены между slave-серверами для обработки параллельно, что улучшает производительность системы.

 - Высокая отказоустойчивость: В случае выхода из строя одного из slave-серверов, остальные серверы могут продолжать работу и обрабатывать запросы. Это обеспечивает высокую доступность и непрерывность работы системы, даже при сбоях в отдельных компонентах.

 - Горизонтальное масштабирование: При необходимости увеличения пропускной способности системы можно просто добавить новые slave-серверы. Горизонтальное масштабирование позволяет равномерно распределить нагрузку на несколько серверов и достичь более высокой производительности без необходимости внесения значительных изменений в архитектуру системы.

 - Балансировка нагрузки: Master-сервер может использоваться для балансировки нагрузки между slave-серверами. Запросы могут быть маршрутизированы к наиболее доступному и свободному серверу, что позволяет эффективно распределять нагрузку и предотвращать перегрузку отдельных компонентов системы.

**Активный сервер со специальным механизмом репликации — distributed replicated block device (DRBD);**

*Активный сервер со специальным механизмом репликации DRBD (distributed replicated block device) предоставляет дополнительные преимущества:*

 - Низкая задержка: DRBD работает на уровне блочных устройств, что позволяет обеспечить низкую задержку при репликации данных между серверами.

 - Синхронная и асинхронная репликация: DRBD поддерживает возможность выбора режима репликации, включая синхронную и асинхронную репликацию в зависимости от требований к целостности данных и производительности.

 - Простота управления и настройки: DRBD предоставляет удобный интерфейс для управления и настройки репликации данных, что упрощает развертывание и обслуживание системы.

**SAN-кластер.**

*SAN-кластер (Storage Area Network) также обладает своими преимуществами:*

 - Централизованное хранение данных: В SAN-кластере данные хранятся на выделенном сетевом хранилище, что позволяет упростить управление данными и обеспечить их доступность для различных серверов в кластере.

 - Высокая пропускная способность: SAN-кластеры обычно используют высокоскоростные сети и протоколы передачи данных, такие как Fibre Channel или iSCSI, что позволяет достичь высокой пропускной способности при обмене данными между серверами и хранилищем.

 - Гибкость и масштабируемость: SAN-кластеры позволяют гибко масштабировать хранилище данных, добавлять или удалять серверы, а также управлять резервными копиями и восстановлением данных.

## Задание 2
### Разработайте план для выполнения горизонтального и вертикального шаринга базы данных.

При выполнении горизонтального и вертикального шаринга базы данных с использованием трех таблиц (пользователи, книги, магазины), можно разработать следующий план:

**Горизонтальное шаринг (по географическому признаку):**

 - Разделить базу данных на отдельные экземпляры, каждый из которых будет располагаться на отдельном сервере.

 - Разбить данные таблиц на основе географических критериев, например, по регионам или странам.

 - На каждом сервере будет находиться полная копия всех трех таблиц.

*Пример блок-схемы горизонтального шаринга:*

![Снимок экрана (237)](https://github.com/AleksandrShirobokov/12-07.Replication-and-scaling.-Part-2/assets/69298696/62c2b21e-7c1a-42a9-ae5a-23455480696b)

**Вертикальное шаринг (по функциональному признаку):**

 - Разделить таблицы на отдельные серверы, каждый из которых будет отвечать за определенные столбцы данных.

 - В каждой базе данных будет содержаться только определенный набор столбцов для каждой таблицы

 - Между серверами может быть установлена связь для поддержки целостности данных.

*Пример блок-схемы вертикального шаринга:*

![Снимок экрана (238)](https://github.com/AleksandrShirobokov/12-07.Replication-and-scaling.-Part-2/assets/69298696/50dbb9b7-32d0-4bbc-9dbd-3c7f5a2ff47f)

**В режиме горизонтального шаринга каждый сервер будет работать независимо, обрабатывая запросы от клиентов и храня полные копии всех трех таблиц.
В режиме вертикального шаринга серверы будут работать в тесной связи, обмениваясь данными, чтобы поддерживать целостность и связи между таблицами.**

*При выборе конкретного режима шаринга следует учитывать требования к производительности, доступности данных, распределения нагрузки и согласованности информации в системе.*

## Задание 3
### Выполните настройку выбранных методов шардинга из задания 2.

*Пришлите конфиг Docker и SQL скрипт с командами для базы данных.*

**Конфиг Docker:**
```
# Dockerfile

# Базовый образ
FROM mysql:latest

# Копируем SQL скрипт в контейнер
COPY init.sql /docker-entrypoint-initdb.d/
```
**SQL скрипт:**
```
-- init.sql

-- Создание базы данных
CREATE DATABASE my_data;

-- Таблица 'Пользователи'
CREATE TABLE users (
  id INT PRIMARY KEY,
  name VARCHAR(50),
  age INT
);

-- Таблица 'Книги'
CREATE TABLE books (
  id INT PRIMARY KEY,
  title VARCHAR(100),
  author VARCHAR(50)
);

-- Таблица 'Магазины'
CREATE TABLE shops (
  id INT PRIMARY KEY,
  name VARCHAR(100),
  address VARCHAR(200)
);
```
